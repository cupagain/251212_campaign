<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Èõô 12 Áõ¥Êí≠ÁãÇÊ≠° | Double 12 Live Carnival</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #050505;
            --bg-panel: #141416;
            
            --accent: #00d2be;
            
            --gold-start: #bf953f;
            --gold-mid: #fcf6ba;
            --gold-end: #b38728;
            
            --text-main: #ffffff;
            --text-sub: #d0d0d0;
            --border-color: rgba(255, 255, 255, 0.15);

            --row-height: 42px;
            
            --font-stack: 'Roboto', 'Noto Sans TC', sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: var(--font-stack);
            background-color: var(--bg-deep);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            /* Á∏ÆÊ∏õÊï¥È´î‰∏ä‰∏ãÂÖßË∑ù */
            padding: 20px 15px;
            background-image: 
                radial-gradient(circle at 50% 0%, rgba(0, 210, 190, 0.1) 0%, transparent 60%),
                linear-gradient(180deg, rgba(20,20,20,0) 0%, rgba(0,0,0,1) 100%);
            -webkit-font-smoothing: antialiased;
        }

        .container {
            width: 100%;
            max-width: 900px;
            position: relative;
            z-index: 2;
        }

        /* --- Diamond Styling --- */
        .val-wrapper {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .d-emoji {
            font-family: "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            margin-left: 6px;
            line-height: 1;
            transform: translateZ(0); 
            display: inline-block;
            vertical-align: baseline;
            -webkit-text-fill-color: initial; 
            text-shadow: none;
        }

        .d-cyan {
            filter: sepia(100%) hue-rotate(125deg) saturate(350%) brightness(1.1) drop-shadow(0 0 5px rgba(0, 210, 190, 0.4));
        }

        .d-gold {
            filter: brightness(0) saturate(100%) invert(83%) sepia(28%) saturate(1063%) hue-rotate(350deg) brightness(102%) contrast(104%) drop-shadow(0 0 8px rgba(252, 246, 186, 0.6));
        }

        /* Â∞∫ÂØ∏Ë®≠ÂÆö */
        .d-sm { font-size: 0.9em; position: relative; top: -1px; } 
        .d-md { font-size: 0.85em; position: relative; top: -1px; } 
        .d-lg { font-size: 0.75em; margin-left: 10px; position: relative; top: -2px; } 
        .d-xl { font-size: 0.85em; margin-left: 8px; position: relative; top: 0; }

        /* --- Language Switcher --- */
        .lang-switch {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            margin-bottom: 20px;
        }

        .lang-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-color);
            color: #ccc;
            padding: 4px 14px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .lang-btn.active {
            background: var(--accent);
            border-color: var(--accent);
            color: #000;
            font-weight: 700;
        }

        /* --- Hero Section --- */
        .hero {
            text-align: center;
            margin-bottom: 25px;
        }

        .date-badge {
            color: var(--accent);
            font-size: 0.9rem;
            letter-spacing: 2px;
            margin-bottom: 10px;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(0, 210, 190, 0.4);
        }

        h1 {
            font-size: clamp(2rem, 6vw, 3.5rem);
            font-weight: 900;
            margin-bottom: 15px;
            font-style: italic;
            text-transform: uppercase;
            color: #fff;
            text-shadow: 0 0 30px rgba(255,255,255,0.3);
            white-space: nowrap;
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2.2rem;
                white-space: normal;
            }
        }

        .marketing-box {
            margin-bottom: 15px;
        }

        .campaign-tag {
            display: inline-block;
            background: linear-gradient(90deg, transparent, rgba(0, 210, 190, 0.15), transparent);
            border-top: 1px solid var(--accent);
            border-bottom: 1px solid var(--accent);
            color: #fff;
            padding: 4px 20px;
            font-size: 1rem;
            font-weight: 700;
            letter-spacing: 2px;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .campaign-highlight {
            font-size: 1.2rem;
            font-weight: 500;
            line-height: 1.4;
            color: #eee;
        }

        @media (max-width: 480px) {
            .campaign-highlight { font-size: 1rem; }
            .campaign-tag { font-size: 0.9rem; padding: 4px 15px; }
        }

        .gold-row {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 2px;
        }

        .gold-text {
            font-size: clamp(2.2rem, 10vw, 3.5rem);
            font-weight: 900;
            background: linear-gradient(to right, var(--gold-start), var(--gold-mid), var(--gold-end));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(252, 246, 186, 0.2);
            white-space: nowrap;
        }

        .cta-btn {
            display: inline-block;
            background: var(--accent);
            color: #000;
            font-size: 1.1rem;
            font-weight: 900;
            padding: 12px 40px;
            border-radius: 50px;
            text-decoration: none;
            box-shadow: 0 0 20px rgba(0, 210, 190, 0.3);
            transition: all 0.2s;
            margin-top: 5px;
            -webkit-font-smoothing: antialiased;
            white-space: nowrap;
        }

        .cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 40px rgba(0, 210, 190, 0.5);
            background: #fff;
        }

        /* --- Dashboard --- */
        .dashboard {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }

        .dash-card {
            background: var(--bg-panel);
            border: 1px solid var(--border-color);
            padding: 15px;
            flex: 1;
            min-width: 300px;
            position: relative;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        .dash-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
        }

        /* Left Card */
        .dash-left {
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 5px;
        }

        .stats-block {
            text-align: center;
            width: 100%;
        }

        .stats-label {
            color: var(--text-sub);
            font-size: 0.9rem;
            margin-bottom: 2px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .stats-val {
            line-height: 1.1;
            font-weight: 900;
            color: #fff;
            text-shadow: 0 5px 15px rgba(0,0,0,0.5);
            font-family: 'Roboto', sans-serif;
            justify-content: center;
        }

        .stats-val.rank-text { 
            font-size: clamp(2.5rem, 8vw, 3.2rem); 
            color: var(--accent); 
        }
        
        .stats-val.total-text { 
            font-size: clamp(2rem, 6vw, 2.5rem);
            color: #fff; 
        }

        .divider {
            width: 60%;
            height: 1px;
            background: rgba(255,255,255,0.1);
            margin: 5px auto;
        }

        /* Right Card - Fixed Height Rows */
        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center; /* Á¢∫‰øùÂûÇÁõ¥ÁΩÆ‰∏≠ */
            height: 44px; /* Ë®≠ÂÆöÂõ∫ÂÆöÈ´òÂ∫¶ */
            padding: 0; /* ÁßªÈô§ paddingÔºåÁî± height ÊéßÂà∂È´òÂ∫¶ */
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }
        .detail-row:last-child { border-bottom: none; }
        
        .d-label { 
            color: var(--text-sub); 
            font-size: 0.9rem; 
            font-weight: 500;
        }
        
        .d-val { 
            color: #fff; 
            font-weight: 700; 
            font-size: clamp(1rem, 4vw, 1.2rem);
            font-family: 'Roboto', sans-serif; 
            justify-content: flex-end; 
        }

        /* --- Split Layout --- */
        .split-header {
            display: grid;
            grid-template-columns: 1fr 1fr;
            margin-bottom: 0;
        }
        
        .col-header {
            background: #1a1a1d;
            padding: 12px;
            color: #fff;
            font-weight: 700;
            text-align: center;
            border-top: 3px solid var(--accent);
            font-size: 1.1rem;
            letter-spacing: 1px;
        }

        .split-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            background: var(--bg-panel);
            border: 1px solid var(--border-color);
            border-top: none;
        }

        @media (max-width: 768px) {
            .split-header, .split-body { grid-template-columns: 1fr 1fr; }
            .col-header { margin-top: 0; border-left: 0; border-top: 3px solid var(--accent); text-align: center; font-size: 0.9rem; padding: 10px 5px;}
        }

        .align-row {
            height: var(--row-height);
            display: flex;
            align-items: center;
            padding: 0 15px;
            border-bottom: 1px solid var(--border-color);
            font-size: 1rem;
        }

        @media (max-width: 480px) {
            .align-row { padding: 0 10px; font-size: 0.9rem; }
        }
        
        .align-row:last-child { border-bottom: none; }

        .lb-col { border-right: 1px solid var(--border-color); }
        .lb-rank { width: 40px; font-weight: 900; color: #666; font-style: italic; font-size: 1.1rem; }
        
        .lb-score { 
            margin-left: auto; 
            color: #fff; 
            font-weight: 700; 
            font-family: 'Roboto', sans-serif;
            display: flex;
            align-items: center;
        }
        
        .rank-1 { color: var(--gold-mid); text-shadow: 0 0 10px rgba(255, 215, 0, 0.4); font-size: 1.3rem; }
        .rank-2 { color: #e0e0e0; text-shadow: 0 0 10px rgba(255, 255, 255, 0.4); font-size: 1.3rem; }
        .rank-3 { color: #d4a58e; text-shadow: 0 0 10px rgba(212, 165, 142, 0.4); font-size: 1.3rem; }

        .r-val { 
            width: 100%; 
            display: flex;
            align-items: center;
            justify-content: flex-end; 
            color: var(--accent); 
            font-weight: 700; 
            font-family: 'Roboto', sans-serif; 
            letter-spacing: 0.5px;
        }

        /* --- Rules --- */
        .rules-section {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255,255,255,0.03);
            border-radius: 10px;
            color: #ccc;
        }
        .rules-title { font-weight: 700; color: #fff; margin-bottom: 15px; font-size: 1.1rem; border-left: 3px solid var(--accent); padding-left: 10px;}
        .rules-list {
            list-style: none;
            padding-left: 0;
        }
        .rules-list li {
            margin-bottom: 6px;
            line-height: 1.5;
            font-size: 0.9rem;
            padding-left: 20px;
            position: relative;
        }
        /* Á∂†Ëâ≤ÂúìÈªû */
        .rules-list li::before {
            content: '‚Ä¢';
            position: absolute;
            left: 0;
            top: 0;
            color: var(--accent);
            font-size: 1.5rem;
            line-height: 1.3rem;
        }

        .error-msg {
            text-align: center;
            padding: 10px;
            background: rgba(255, 50, 50, 0.15);
            color: #ff8080;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 50, 50, 0.3);
            border-radius: 8px;
        }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="container">
        <!-- Language -->
        <div class="lang-switch">
            <button class="lang-btn active" onclick="setLang('tc')">ÁπÅÈ´î</button>
            <button class="lang-btn" onclick="setLang('sc')">ÁÆÄ‰Ωì</button>
            <button class="lang-btn" onclick="setLang('en')">EN</button>
            <button class="lang-btn" onclick="setLang('jp')">Êó•Êú¨Ë™û</button>
        </div>

        <!-- Hero -->
        <div class="hero">
            <div class="date-badge" data-i18n="date">12/12 - 12/17</div>
            <h1 data-i18n="title">Èõô 12 Áõ¥Êí≠ÁãÇÊ≠°</h1>
            
            <div class="marketing-box">
                <div class="campaign-tag" data-i18n="subtitle">Áõ¥Êí≠ËÄóÈëΩÊéíË°åÊ¶ú</div>
                <div class="campaign-highlight">
                    <span data-i18n="desc_prefix">ÊáâÊè¥‰∫∫Ê∞£Â•≥Á•ûÂ•™Â§ßÁçéÔºåÂâçÂçÅÂêçÁìúÂàÜÁ∏ΩË®à</span><br>
                    
                    <div class="gold-row">
                        <span class="gold-text">550,000</span>
                        <span class="d-emoji d-xl d-gold">üíé</span>
                    </div>
                </div>
            </div>
            
            <div>
                <a href="#" class="cta-btn" data-i18n="cta">Êü•Áúã‰∫∫Ê∞£Â•≥Á•ûÊ¥ªÂãï</a>
            </div>
        </div>

        <!-- Error Msg -->
        <div id="error-msg" class="error-msg hidden">
            <span data-i18n="error_desc">ËÆÄÂèñÂ§±Êïó</span> <span id="debug-text" style="font-size:0.8em; opacity: 0.8;"></span>
        </div>

        <!-- Dashboard (Symmetrical & Compact) -->
        <div id="stats-content" class="dashboard">
            <!-- Left Card: Rank & Total -->
            <div class="dash-card dash-left">
                <!-- Rank Block -->
                <div class="stats-block">
                    <div class="stats-label" data-i18n="current_rank">Áï∂ÂâçÊéíÂêç</div>
                    <div class="stats-val rank-text" id="disp-rank">--</div>
                </div>
                
                <div class="divider"></div>

                <!-- Total Block -->
                <div class="stats-block">
                    <div class="stats-label" data-i18n="total_spent">Á∏ΩÊ∂àË≤ª</div>
                    <div class="stats-val total-text val-wrapper">
                        <span id="disp-total">0</span>
                        <!-- Á∏ÆÂ∞èÂæåÁöÑÈùíËâ≤ÈëΩÁü≥ (0.75em) -->
                        <span class="d-emoji d-lg d-cyan">üíé</span>
                    </div>
                </div>
            </div>

            <!-- Right Card: Details -->
            <div class="dash-card dash-right">
                <div class="detail-row">
                    <span class="d-label" data-i18n="breakdown_gift">Áõ¥Êí≠Á¶ÆÁâ©</span>
                    <div class="d-val val-wrapper">
                        <span id="disp-gift">0</span>
                        <span class="d-emoji d-md d-cyan">üíé</span>
                    </div>
                </div>
                <div class="detail-row">
                    <span class="d-label" data-i18n="breakdown_ticket">ÈôêÊôÇË°®Êºî</span>
                    <div class="d-val val-wrapper">
                        <span id="disp-ticket">0</span>
                        <span class="d-emoji d-md d-cyan">üíé</span>
                    </div>
                </div>
                <div class="detail-row">
                    <span class="d-label" data-i18n="breakdown_menu">ÊåëÈÄóË°®Êºî</span>
                    <div class="d-val val-wrapper">
                        <span id="disp-command">0</span>
                        <span class="d-emoji d-md d-cyan">üíé</span>
                    </div>
                </div>
                <div class="detail-row">
                    <span class="d-label" data-i18n="breakdown_lovense">ÈúáÂãïÊéßÂà∂</span>
                    <div class="d-val val-wrapper">
                        <span id="disp-lovense">0</span>
                        <span class="d-emoji d-md d-cyan">üíé</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Aligned Leaderboard & Rewards -->
        <div class="split-header">
            <div class="col-header" data-i18n="lb_title">Á∏ΩÈëΩÊéíË°åÊ¶ú</div>
            <div class="col-header" data-i18n="rewards_title">ÊéíÂêçÁçéÂãµ</div>
        </div>
        <div class="split-body">
            <!-- Left: Leaderboard -->
            <div class="lb-col" id="leaderboard-body">
                <!-- JS Generated -->
            </div>

            <!-- Right: Rewards -->
            <div class="reward-col" id="rewards-body">
                <!-- JS Generated -->
            </div>
        </div>

        <!-- Rules -->
        <div class="rules-section">
            <div class="rules-title" data-i18n="rules_title">Ê¥ªÂãïË™™Êòé</div>
            <ul class="rules-list" id="rules-list"></ul>
        </div>
    </div>

    <script>
        const API_BASE_URL = "https://swag-campaign-api-388277274438.asia-east1.run.app"; 
        
        const DIAMOND_HTML = '<span class="d-emoji d-sm d-cyan">üíé</span>';

        const TRANSLATIONS = {
            tc: {
                date: "12/12 00:00 - 12/17 23:59 (GMT+8)",
                title: "Èõô 12 Áõ¥Êí≠ÁãÇÊ≠°",
                subtitle: "Áõ¥Êí≠ËÄóÈëΩÊéíË°åÊ¶ú",
                desc_prefix: "ÊáâÊè¥‰∫∫Ê∞£Â•≥Á•ûÂ•™Â§ßÁçéÔºåÂâçÂçÅÂêçÁìúÂàÜÁ∏ΩË®à",
                cta: "Êü•Áúã‰∫∫Ê∞£Â•≥Á•ûÊ¥ªÂãï",
                current_rank: "Áï∂ÂâçÊéíÂêç",
                total_spent: "Á∏ΩÊ∂àË≤ª",
                error_desc: "ËÆÄÂèñÂ§±ÊïóÔºåË´ãÁ¢∫Ë™çÂ∑≤ÁôªÂÖ•„ÄÇ",
                lb_title: "Á∏ΩÈëΩÊéíË°åÊ¶ú",
                rewards_title: "ÊéíÂêçÁçéÂãµ",
                breakdown_gift: "Áõ¥Êí≠Á¶ÆÁâ©",
                breakdown_ticket: "ÈôêÊôÇË°®Êºî",
                breakdown_menu: "ÊåëÈÄóË°®Êºî",
                breakdown_lovense: "ÈúáÂãïÊéßÂà∂",
                rules_title: "Ê¥ªÂãïË™™Êòé",
                rules_list: [
                    "Áõ¥Êí≠ÈñìÁ∏ΩÈëΩÁü≥ÂÉÖË®àÁÆóÔºö„ÄåÁõ¥Êí≠Á¶ÆÁâ©„Äç„ÄÅ„ÄåÈôêÊôÇË°®ÊºîÁ•®Âà∏„Äç„ÄÅ„ÄåÊåëÈÄóË°®Êºî„Äç„ÄÅ„ÄåÈúáÂãïÊéßÂà∂„Äç„ÄÇ",
                    "ÊéíË°åÊ¶úÈëΩÁü≥Áõ∏ÂêåËÄÖÔºå‰ª•ÂÖàÈÅîÊàêËÄÖÊéíÂêçÂú®Ââç„ÄÇ",
                    "ÊéíÂêçÈëΩÁü≥ÁçéÂãµÂ∞áÊñºÊ¥ªÂãïÁµêÊùüÂæå 3 ÂÄãÂ∑•‰ΩúÂ§©ÂÖßÊ¥æÁôº„ÄÇ",
                    "Ë≥áÊñôÈúÄÁôªÂÖ•Â∏≥Ëôü‰ª•Ê≠£Á¢∫È°ØÁ§∫„ÄÇ",
                    "ÊúÄÁµÇÁµêÊûú‰ª•ÂÆòÊñπË®àÁÆóÁÇ∫Ê∫ñ„ÄÇ"
                ]
            },
            sc: {
                date: "12/12 00:00 - 12/17 23:59 (GMT+8)",
                title: "Âèå 12 Áõ¥Êí≠ÁãÇÊ¨¢",
                subtitle: "Áõ¥Êí≠ËÄóÈíªÊéíË°åÊ¶ú",
                desc_prefix: "Â∫îÊè¥‰∫∫Ê∞îÂ•≥Á•ûÂ§∫Â§ßÂ•ñÔºåÂâçÂçÅÂêçÁìúÂàÜÊÄªËÆ°",
                cta: "Êü•Áúã‰∫∫Ê∞îÂ•≥Á•ûÊ¥ªÂä®",
                current_rank: "ÂΩìÂâçÊéíÂêç",
                total_spent: "ÊÄªÊ∂àË¥π",
                error_desc: "ËØªÂèñÂ§±Ë¥•ÔºåËØ∑Á°ÆËÆ§Â∑≤ÁôªÂΩï„ÄÇ",
                lb_title: "ÊÄªÈíªÊéíË°åÊ¶ú",
                rewards_title: "ÊéíÂêçÂ•ñÂä±",
                breakdown_gift: "Áõ¥Êí≠Á§ºÁâ©",
                breakdown_ticket: "ÈôêÊó∂Ë°®Êºî",
                breakdown_menu: "ÊåëÈÄóË°®Êºî",
                breakdown_lovense: "ÈúáÂä®ÊéßÂà∂",
                rules_title: "Ê¥ªÂä®ËØ¥Êòé",
                rules_list: [
                    "Áõ¥Êí≠Èó¥ÊÄªÈíªÁü≥‰ªÖËÆ°ÁÆóÔºö‚ÄúÁõ¥Êí≠Á§ºÁâ©‚ÄùÔºå‚ÄúÈôêÊó∂Ë°®ÊºîÁ•®Âà∏‚ÄùÔºå‚ÄúÊåëÈÄóË°®Êºî‚ÄùÔºå‚ÄúÈúáÂä®ÊéßÂà∂‚Äù„ÄÇ",
                    "ÊéíË°åÊ¶úÈíªÁü≥Áõ∏ÂêåËÄÖÔºå‰ª•ÂÖàËææÊàêËÄÖÊéíÂêçÂú®Ââç„ÄÇ",
                    "ÊéíÂêçÈíªÁü≥Â•ñÂä±Â∞Ü‰∫éÊ¥ªÂä®ÁªìÊùüÂêé 3 ‰∏™Â∑•‰ΩúÂ§©ÂÜÖÊ¥æÂèë„ÄÇ",
                    "ËµÑÊñôÈúÄÁôªÂÖ•Â∏êÂè∑‰ª•Ê≠£Á°ÆÊòæÁ§∫„ÄÇ",
                    "ÊúÄÁªàÁªìÊûú‰ª•ÂÆòÊñπËÆ°ÁÆó‰∏∫ÂáÜ„ÄÇ"
                ]
            },
            en: {
                date: "Dec 12 - Dec 17 (GMT+8)",
                title: "Double 12 Carnival",
                subtitle: "Diamond Spending Leaderboard",
                desc_prefix: "Support Goddesses & Win Big! Share total",
                cta: "View Event",
                current_rank: "Rank",
                total_spent: "Total",
                error_desc: "Load failed. Please log in.",
                lb_title: "Total Diamond Leaderboard",
                rewards_title: "Rewards",
                breakdown_gift: "Livestream Gift",
                breakdown_ticket: "Paid Show",
                breakdown_menu: "Tease Show",
                breakdown_lovense: "Vibe Control",
                rules_title: "Rules",
                rules_list: [
                    "Total diamonds calculated from: 'Livestream Gift', 'Paid Show', 'Tease Show', 'Vibe Control' only.",
                    "If diamonds are equal, the first to achieve the amount ranks higher.",
                    "Rewards distributed within 3 working days after event ends.",
                    "Login required to view personal stats.",
                    "Official calculation results are final."
                ]
            },
            jp: {
                date: "12/12 - 12/17 (GMT+8)",
                title: "„ÉÄ„Éñ„É´12 „Ç´„Éº„Éã„Éê„É´",
                subtitle: "„ÉÄ„Ç§„É§Ê∂àË≤ª„É©„É≥„Ç≠„É≥„Ç∞",
                desc_prefix: "Â•≥Á•û„ÇíÂøúÊè¥„Åó„Å¶Â§ßË≥û„ÇíÁãô„Åä„ÅÜÔºÅÁ∑èÈ°ç",
                cta: "„Ç§„Éô„É≥„Éà„ÇíË¶ã„Çã",
                current_rank: "ÁèæÂú®„ÅÆÈ†Ü‰Ωç",
                total_spent: "ÂêàË®àÊ∂àË≤ª",
                error_desc: "Ë™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ",
                lb_title: "„É©„É≥„Ç≠„É≥„Ç∞",
                rewards_title: "„É©„É≥„Ç≠„É≥„Ç∞Â†±ÈÖ¨",
                breakdown_gift: "„É©„Ç§„Éñ„ÇÆ„Éï„Éà",
                breakdown_ticket: "ÊúâÊñô„Ç∑„Éß„Éº",
                breakdown_menu: "„Çª„ÇØ„Ç∑„Éº„Ç∑„Éß„Éº",
                breakdown_lovense: "„É™„É¢„Éº„Éà„Éê„Ç§„Éñ",
                rules_title: "Ê≥®ÊÑè‰∫ãÈ†Ö",
                rules_list: [
                    "ÂØæË±°Ôºö„Äé„É©„Ç§„Éñ„ÇÆ„Éï„Éà„Äè„ÄÅ„ÄéÊúâÊñô„Ç∑„Éß„Éº„Äè„ÄÅ„Äé„Çª„ÇØ„Ç∑„Éº„Ç∑„Éß„Éº„Äè„ÄÅ„Äé„É™„É¢„Éº„Éà„Éê„Ç§„Éñ„Äè„ÅÆ„Åø„ÄÇ",
                    "Âêå„ÉÄ„Ç§„É§Êï∞„ÅÆÂ†¥Âêà„ÅØ„ÄÅÂÖà„Å´ÈÅîÊàê„Åó„ÅüÊñπ„Åå‰∏ä‰Ωç„Å®„Å™„Çä„Åæ„Åô„ÄÇ",
                    "Â†±ÈÖ¨„ÅØ„Ç§„Éô„É≥„ÉàÁµÇ‰∫ÜÂæå3Âñ∂Ê•≠Êó•‰ª•ÂÜÖ„Å´ÈÖçÂ∏É„Åï„Çå„Åæ„Åô„ÄÇ",
                    "„Éá„Éº„ÇøË°®Á§∫„Å´„ÅØ„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ",
                    "ÊúÄÁµÇÁµêÊûú„ÅØÂÖ¨Âºè„ÅÆÈõÜË®à„Å´Ê∫ñ„Åò„Åæ„Åô„ÄÇ"
                ]
            }
        };

        const MOCK_LEADERBOARD = [
            { rank: 1, score: 917274 },
            { rank: 2, score: 816167 },
            { rank: 3, score: 591688 },
            { rank: 4, score: 568800 },
            { rank: 5, score: 532795 },
            { rank: 6, score: 499997 },
            { rank: 7, score: 482676 },
            { rank: 8, score: 427947 },
            { rank: 9, score: 397675 },
            { rank: 10, score: 389995 }
        ];

        const REWARDS = [
            100000, 90000, 80000, 70000, 60000, 50000, 40000, 30000, 20000, 10000
        ];

        function setLang(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (
                    (lang === 'tc' && btn.innerText.includes('ÁπÅ')) ||
                    (lang === 'sc' && btn.innerText.includes('ÁÆÄ')) ||
                    (lang === 'en' && btn.innerText.includes('EN')) ||
                    (lang === 'jp' && btn.innerText.includes('Êó•'))
                ) {
                    btn.classList.add('active');
                }
            });

            const t = TRANSLATIONS[lang];

            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) el.innerHTML = t[key];
            });

            const rulesContainer = document.getElementById('rules-list');
            rulesContainer.innerHTML = '';
            t.rules_list.forEach(rule => {
                const li = document.createElement('li');
                li.textContent = rule;
                rulesContainer.appendChild(li);
            });

            renderAlignedLists();
        }

        function renderAlignedLists() {
            // Render Leaderboard (Left)
            const lbBody = document.getElementById('leaderboard-body');
            lbBody.innerHTML = '';
            MOCK_LEADERBOARD.forEach(item => {
                let rankClass = '';
                if(item.rank === 1) rankClass = 'rank-1';
                else if(item.rank === 2) rankClass = 'rank-2';
                else if(item.rank === 3) rankClass = 'rank-3';

                const div = document.createElement('div');
                div.className = 'align-row';
                div.innerHTML = `
                    <span class="lb-rank ${rankClass}">${item.rank}</span>
                    <span class="lb-score val-wrapper">${item.score.toLocaleString()} ${DIAMOND_HTML}</span>
                `;
                lbBody.appendChild(div);
            });

            // Render Rewards (Right)
            const rewardsBody = document.getElementById('rewards-body');
            rewardsBody.innerHTML = '';
            REWARDS.forEach((val) => {
                const div = document.createElement('div');
                div.className = 'align-row';
                div.innerHTML = `
                    <div class="r-val val-wrapper">${val.toLocaleString()} ${DIAMOND_HTML}</div>
                `;
                rewardsBody.appendChild(div);
            });
        }

        function getUserId() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('user_id')) return urlParams.get('user_id');
            if (window.location.hash) {
                const hashParams = new URLSearchParams(window.location.hash.substring(1));
                if (hashParams.has('user_id')) return hashParams.get('user_id');
            }
            const regex = /user_id=([a-fA-F0-9]{24})/;
            const match = window.location.href.match(regex);
            if (match && match[1]) return match[1];
            return null;
        }

        async function fetchUserData() {
            const userId = getUserId();
            const errorEl = document.getElementById('error-msg');
            const debugText = document.getElementById('debug-text');

            if (!userId) return; 

            try {
                const response = await fetch(`${API_BASE_URL}/?user_id=${userId}`, {
                    method: 'GET',
                    credentials: 'omit',
                    headers: { 'Content-Type': 'application/json' }
                });

                if (!response.ok) throw new Error(`${response.status}`);

                const data = await response.json();

                document.getElementById('disp-rank').textContent = data.rank;
                document.getElementById('disp-total').textContent = data.total_diamonds.toLocaleString();
                
                document.getElementById('disp-gift').textContent = data.breakdown.livestream_gift.toLocaleString();
                document.getElementById('disp-ticket').textContent = data.breakdown.show_ticket.toLocaleString();
                document.getElementById('disp-command').textContent = data.breakdown.command.toLocaleString();
                document.getElementById('disp-lovense').textContent = data.breakdown.lovense.toLocaleString();

            } catch (err) {
                console.error(err);
                errorEl.classList.remove('hidden');
                debugText.textContent = `(ID: ${userId})`;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            setLang('tc');
            fetchUserData();
        });
    </script>
</body>
</html>
