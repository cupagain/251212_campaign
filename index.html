<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Xmas Campaign 2025</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Roboto:wght@500;700;900&display=swap" rel="stylesheet">

    <!-- Custom Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        swag: {
                            teal: '#00d2be', // SWAG Teal
                            dark: '#0a0a0a',
                            panel: '#1e1e1e',
                        },
                        xmas: {
                            gold: '#F2C94C',
                            red: '#D42426'
                        }
                    },
                    fontFamily: {
                        sans: ['Roboto', '"Noto Sans TC"', 'sans-serif'],
                    },
                    boxShadow: {
                        'glow': '0 0 20px rgba(0, 210, 190, 0.25)',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background: radial-gradient(circle at 50% 0%, #1a2c2a 0%, #050505 80%);
            color: #ffffff;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        .glass-panel {
            background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        /* Ë£ùÈ£æÂúñÁâá */
        .deco-wreath {
            position: absolute;
            top: -20px;
            right: -20px;
            width: 110px;
            z-index: 0;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5));
        }

        .deco-santa {
            position: absolute;
            top: 20px;
            left: -20px;
            width: 100px;
            z-index: 0;
            transform: rotate(-10deg);
        }

        .deco-house {
            /* ‰øÆÊîπ‰ΩçÁΩÆÂà∞Ê®ôÈ°åÂè≥ÂÅ¥ÔºåÈÅøÂÖçÊìã‰ΩèÂ∫ïÈÉ®Ë°®Ê†º */
            position: absolute;
            top: -10px;
            right: 0;
            width: 70px;
            z-index: 10;
            opacity: 1;
            transform: rotate(5deg);
        }

        .diamond-icon {
            display: block;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        [v-cloak] { display: none; }
    </style>
</head>
<body>

<div id="app" v-cloak class="relative pb-10 overflow-x-hidden">

    <!-- Ë™ûË®ÄÂàáÊèõ -->
    <div class="fixed top-4 right-4 z-50 flex gap-2 bg-black/60 backdrop-blur rounded-full p-1 border border-white/10">
        <button 
            v-for="lang in ['tw', 'cn', 'en', 'jp']" 
            :key="lang"
            @click="currentLang = lang"
            class="px-3 py-1 rounded-full text-xs font-bold transition-colors uppercase tracking-wider"
            :class="currentLang === lang ? 'bg-swag-teal text-black' : 'text-gray-400 hover:text-white'">
            {{ lang }}
        </button>
    </div>

    <main class="max-w-md mx-auto px-4 pt-10 relative z-10">
        
        <!-- SECTION 1: HERO & EVENT INFO -->
        <header class="text-center mb-6 relative">
            <img src="https://public.swag.live/products/livestream-wreath.png" class="deco-wreath" alt="Wreath">
            <img src="https://public.swag.live/products/livestream-coming.png" class="deco-santa" alt="Santa">

            <div class="relative z-10 pt-4">
                <p class="text-swag-teal text-xs font-bold tracking-widest uppercase mb-2 border border-swag-teal/30 inline-block px-3 py-1 rounded-full bg-swag-teal/10">
                    {{ t.duration }}
                </p>
                
                <h1 class="text-4xl font-black text-white mb-2 drop-shadow-lg tracking-tight">
                    {{ t.title }}
                </h1>

                <!-- Êñ∞Â¢ûÔºöÊåáÂÆöÁ¶ÆÁâ©ÊèêÁ§∫ -->
                <p class="text-xmas-gold font-bold text-sm mb-6 bg-black/40 inline-block px-4 py-1.5 rounded-lg border border-xmas-gold/30">
                    üéÅ {{ t.giftRequirement }}
                </p>

                <!-- Ê¥ªÂãïÁçéÂãµÁ∏ΩË¶ΩÂç°Áâá -->
                <div class="glass-panel rounded-2xl overflow-hidden text-left relative z-10">
                    
                    <!-- ‰∏äÂçäÈÉ®ÔºöÊäΩÁçé -->
                    <div class="p-5 border-b border-white/10 bg-gradient-to-r from-swag-teal/10 to-transparent">
                        <div class="flex items-center justify-between mb-2">
                            <h2 class="text-lg font-bold text-white">{{ t.drawTitle }}</h2>
                            <!-- Êú¨Âú∞ÂåñÊ®ôÁ±§ -->
                            <span class="text-xs bg-xmas-red text-white px-2 py-0.5 rounded font-bold tracking-wide">
                                {{ t.badgeDraw }}
                            </span>
                        </div>
                        <p class="text-gray-300 text-sm mb-3">{{ t.drawDesc }}</p>
                        
                        <!-- ÈëΩÁü≥È°ØÁ§∫ÂçÄÂ°ä (‰øÆÊ≠£Â∞çÈΩäËàáÂ§ßÂ∞è) -->
                        <div class="flex items-center gap-4 bg-black/30 p-3 rounded-lg border border-white/5">
                            <img src="https://public.swag.live/notifications/custom/EL/1212_campaign.png" class="diamond-icon w-12 h-12 shrink-0" alt="Diamond">
                            <div class="flex flex-col justify-center">
                                <p class="text-3xl font-black text-swag-teal leading-none mb-1">10,000</p>
                                <p class="text-[10px] text-gray-400 uppercase tracking-wider leading-none">{{ t.diamondsEach }}</p>
                            </div>
                        </div>
                    </div>

                    <!-- ‰∏ãÂçäÈÉ®ÔºöÊéíË°å -->
                    <div class="p-5 bg-gradient-to-r from-xmas-gold/10 to-transparent">
                        <div class="flex items-center justify-between mb-2">
                            <h2 class="text-lg font-bold text-white">{{ t.rankTitle }}</h2>
                            <!-- Êú¨Âú∞ÂåñÊ®ôÁ±§ -->
                            <span class="text-xs bg-xmas-gold text-black px-2 py-0.5 rounded font-bold tracking-wide">
                                {{ t.badgeRank }}
                            </span>
                        </div>
                        <p class="text-gray-300 text-sm mb-3">{{ t.rankDesc }}</p>
                        
                        <!-- ÈëΩÁü≥È°ØÁ§∫ÂçÄÂ°ä (‰øÆÊ≠£Â∞çÈΩäËàáÂ§ßÂ∞è) -->
                        <div class="flex items-center gap-4 bg-black/30 p-3 rounded-lg border border-white/5">
                            <img src="https://public.swag.live/notifications/custom/EL/1212_campaign.png" class="diamond-icon w-12 h-12 shrink-0" alt="Diamond">
                            <div class="flex flex-col justify-center">
                                <p class="text-3xl font-black text-xmas-gold leading-none mb-1">100,000</p>
                                <p class="text-[10px] text-gray-400 uppercase tracking-wider leading-none">{{ t.maxPrize }}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CTA Button -->
                <a :href="giftUrl" target="_blank" 
                   class="block mt-4 w-full py-4 rounded-xl bg-gradient-to-r from-swag-teal to-teal-600 text-black font-black text-xl shadow-glow hover:brightness-110 transition active:scale-[0.98]">
                    {{ t.ctaButton }}
                </a>
            </div>
        </header>

        <!-- SECTION 2: DASHBOARD -->
        <section class="mb-8 relative z-20">
            <div class="glass-panel rounded-2xl p-6">
                
                <div v-if="loading" class="py-8 text-center text-gray-400">
                    {{ t.loading }}
                </div>
                <div v-else-if="error" class="py-6 text-center text-xmas-red font-bold">
                    {{ error }}
                </div>
                
                <div v-else>
                    <!-- 1. ÊäΩÁçéË≥áÊ†º -->
                    <div class="mb-6 text-center p-4 rounded-xl border-2 transition-colors"
                         :class="userData.is_eligible 
                            ? 'bg-swag-teal/10 border-swag-teal' 
                            : 'bg-gray-800/40 border-gray-600'">
                        <p class="text-sm font-bold text-gray-400 mb-1 uppercase tracking-widest">{{ t.lotteryStatus }}</p>
                        <div class="flex items-center justify-center gap-2">
                            <span class="text-3xl font-black" 
                                  :class="userData.is_eligible ? 'text-swag-teal' : 'text-gray-500'">
                                {{ userData.is_eligible ? t.qualified : t.notQualified }}
                            </span>
                            <span v-if="userData.is_eligible" class="text-2xl">‚úÖ</span>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">{{ t.event1Desc }}</p>
                    </div>

                    <!-- 2. ÊéíÂêçËàáÊï∏Êìö -->
                    <div class="grid grid-cols-2 gap-4 mb-8">
                        <div class="bg-black/40 rounded-xl p-4 text-center border border-white/5">
                            <p class="text-xs text-gray-500 font-bold mb-1">{{ t.myRank }}</p>
                            <p class="text-3xl font-bold text-white font-sans">
                                {{ userData.rank ? userData.rank : '-' }}
                            </p>
                        </div>
                        <div class="bg-black/40 rounded-xl p-4 text-center border border-white/5">
                            <p class="text-xs text-gray-500 font-bold mb-1">{{ t.myDiamonds }}</p>
                            <div class="flex items-center justify-center gap-1">
                                <img src="https://public.swag.live/notifications/custom/EL/1212_campaign.png" class="w-6 h-6" alt="Diamond">
                                <p class="text-3xl font-bold text-swag-teal font-sans">
                                    {{ formatNumber(userData.diamond_cost) }}
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Á∏ΩÈëΩÊ¶úÁçéÂãµË°® -->
                    <div class="relative pt-6 border-t border-white/10">
                        <!-- Ë™øÊï¥ËñëÈ§ÖÂ±ã‰ΩçÁΩÆÔºöÊîæÂú®Ê®ôÈ°åÂàóÂè≥ÂÅ¥Ôºå‰∏çÊìãÂÖßÂÆπ -->
                        <div class="flex items-center justify-between mb-4 relative">
                            <h3 class="text-lg font-bold text-white flex items-center gap-2">
                                <span class="w-1 h-6 bg-xmas-gold rounded-full"></span>
                                {{ t.event2Title }}
                            </h3>
                            <img src="https://public.swag.live/products/livestream-gingerbread-house.png" class="deco-house" alt="House">
                        </div>

                        <div class="overflow-hidden rounded-lg border border-white/10 bg-black/20 relative z-0">
                            <table class="w-full text-sm">
                                <thead class="bg-white/5 text-gray-400 text-xs uppercase">
                                    <tr>
                                        <th class="py-3 px-4 text-left font-medium">{{ t.rankCol }}</th>
                                        <th class="py-3 px-4 text-right font-medium">{{ t.prizeCol }}</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-white/5">
                                    <tr v-for="(prize, index) in rankingPrizes" :key="index" class="hover:bg-white/5 transition">
                                        <td class="py-3 px-4">
                                            <div class="flex items-center gap-3">
                                                <span class="w-6 h-6 flex items-center justify-center rounded-full text-xs font-bold"
                                                      :class="getRankBadgeClass(index)">
                                                    {{ index + 1 }}
                                                </span>
                                            </div>
                                        </td>
                                        <td class="py-3 px-4 text-right">
                                            <div class="flex items-center justify-end gap-2">
                                                <span class="font-bold text-lg font-sans" :class="index < 3 ? 'text-xmas-gold' : 'text-gray-200'">
                                                    {{ formatNumber(prize) }}
                                                </span>
                                                <img src="https://public.swag.live/notifications/custom/EL/1212_campaign.png" class="w-5 h-5" alt="Diamond">
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FOOTER: RULES -->
        <footer class="mb-12 px-4 pb-4">
            <h4 class="text-xs font-bold text-gray-500 uppercase mb-3 text-center tracking-widest border-b border-gray-800 pb-2">
                {{ t.rulesTitle }}
            </h4>
            <ul class="space-y-2 text-xs text-gray-400 leading-relaxed list-disc list-outside pl-4">
                <li v-for="(rule, idx) in t.rules" :key="idx">{{ rule }}</li>
            </ul>
        </footer>

    </main>
</div>

<script>
    const { createApp, ref, computed, onMounted } = Vue;

    // CONFIGURATION
    const API_BASE_URL = "https://op-campaign-api-905468082258.asia-east1.run.app"; // Ë´ãÊõøÊèõ
    const GIFT_URL = "https://swag.live/livestream"; // Ë´ãÊõøÊèõ

    // Âõ∫ÂÆöË¶èÂâáÊñáÊ°à
    const FIXED_RULES = [
        "ÂÉÖÈôêÈÄÅ„ÄåËÅñË™ïÂø´ÁÜ±„ÄçÁ≥ªÂàóÁ¶ÆÁâ©ÔºåÂåÖÂê´Áõ¥Êí≠ÈñìËàáËÅäÂ§©ÂÆ§„ÄÇ",
        "ÊéíË°åÊ¶úÈëΩÁü≥Áõ∏ÂêåËÄÖÔºå‰ª•ÂÖàÈÅîÊàêËÄÖÊéíÂêçÂú®Ââç„ÄÇ",
        "Á∏ΩÈëΩÊ¶úÁçéÂãµËàáÊäΩÁçéÁçéÂãµÂ∞áÊñºÊ¥ªÂãïÁµêÊùüÂæå 3 ÂÄãÂ∑•‰ΩúÂ§©ÂÖßÁôºÊîæ„ÄÇ",
        "Ë≥áÊñôÈ°ØÁ§∫ÂèØËÉΩÊúâ‰∫õÂæÆÂª∂ÈÅ≤ÔºåÊúÄÁµÇÁµêÊûú‰ª•ÂÆòÊñπË®àÁÆóÁÇ∫Ê∫ñ„ÄÇ"
    ];

    const TRANSLATIONS = {
        tw: {
            title: "ËÅñË™ïÁãÇÊ≠°ÈÄÅ",
            duration: "12/12 - 12/16 (GMT+8)",
            giftRequirement: "ÂÉÖÈôêÈÄÅ„ÄåËÅñË™ïÂø´ÁÜ±„ÄçÁ≥ªÂàóÁ¶ÆÁâ©",
            drawTitle: "ÈÄÅÁ¶ÆÊäΩËê¨ÈëΩ",
            badgeDraw: "ÊäΩÁçéÊ¥ªÂãï",
            drawDesc: "ÊäΩÂá∫ 50 ‰ΩçÂπ∏ÈÅãÂÖíÔºåÊØè‰∫∫Áç®ÂæóÔºö",
            diamondsEach: "ÊØè‰∫∫Áç≤Âæó",
            rankTitle: "Á∏ΩÈëΩÊ¶úÁçéÂãµ",
            badgeRank: "ÂâçÂçÅÂêçÁçéÂãµ",
            rankDesc: "ÂâçÂçÅÂêçÂä†Á¢ºÈÄÅÔºåÊúÄÈ´òÁç≤ÂæóÔºö",
            maxPrize: "ÂÜ†ËªçÁçéÂãµ",
            ctaButton: "Á´ãÂç≥ÈÄÅÁ¶Æ",
            
            lotteryStatus: "ÊäΩÁçéË≥áÊ†º",
            qualified: "Â∑≤Áç≤ÂæóË≥áÊ†º",
            notQualified: "Â∞öÊú™ÈÅîÊ®ô",
            event1Desc: "ÈÄÅÂá∫‰ªª‰∏ÄÊåáÂÆöËÅñË™ïÁ¶ÆÁâ©Âç≥Á¨¶ÂêàË≥áÊ†º",
            
            myRank: "ÊàëÁöÑÊéíÂêç",
            myDiamonds: "Á¥ØÁ©çÈëΩÁü≥",
            event2Title: "Á∏ΩÈëΩÊ¶úÁçéÂãµ‰∏ÄË¶Ω",
            rankCol: "ÊéíÂêç",
            prizeCol: "ÈëΩÁü≥ÁçéÂãµ",
            
            loading: "ËÆÄÂèñ‰∏≠...",
            errorTitle: "ÁÑ°Ê≥ïÂèñÂæóË≥áÊñô",
            rulesTitle: "Ê¥ªÂãïÊ≥®ÊÑè‰∫ãÈ†Ö",
            rules: FIXED_RULES
        },
        cn: {
            title: "Âú£ËØûÁãÇÊ¨¢ÈÄÅ",
            duration: "12/12 - 12/16 (GMT+8)",
            giftRequirement: "‰ªÖÈôêÈÄÅ„ÄåÂú£ËØûÂø´ÁÉ≠„ÄçÁ≥ªÂàóÁ§ºÁâ©",
            drawTitle: "ÈÄÅÁ§ºÊäΩ‰∏áÈíª",
            badgeDraw: "ÊäΩÂ•ñÊ¥ªÂä®",
            drawDesc: "ÊäΩÂá∫ 50 ‰ΩçÂπ∏ËøêÂÑøÔºåÊØè‰∫∫Áã¨ÂæóÔºö",
            diamondsEach: "ÊØè‰∫∫Ëé∑Âæó",
            rankTitle: "ÊÄªÈíªÊ¶úÂ•ñÂä±",
            badgeRank: "ÂâçÂçÅÂêçÂ•ñÂä±",
            rankDesc: "ÂâçÂçÅÂêçÂä†Á†ÅÈÄÅÔºåÊúÄÈ´òËé∑ÂæóÔºö",
            maxPrize: "ÂÜ†ÂÜõÂ•ñÂä±",
            ctaButton: "Á´ãÂç≥ÈÄÅÁ§º",
            lotteryStatus: "ÊäΩÂ•ñËµÑÊ†º",
            qualified: "Â∑≤Ëé∑ÂæóËµÑÊ†º",
            notQualified: "Â∞öÊú™ËææÊ†á",
            event1Desc: "ÈÄÅÂá∫‰ªª‰∏ÄÊåáÂÆöÂú£ËØûÁ§ºÁâ©Âç≥Á¨¶ÂêàËµÑÊ†º",
            myRank: "ÊàëÁöÑÊéíÂêç",
            myDiamonds: "Á¥ØÁßØÈíªÁü≥",
            event2Title: "ÊÄªÈíªÊ¶úÂ•ñÂä±‰∏ÄËßà",
            rankCol: "ÊéíÂêç",
            prizeCol: "ÈíªÁü≥Â•ñÂä±",
            loading: "ËØªÂèñ‰∏≠...",
            errorTitle: "Êó†Ê≥ïËé∑ÂèñÊï∞ÊçÆ",
            rulesTitle: "Ê¥ªÂä®Ê≥®ÊÑè‰∫ãÈ°π",
            rules: [
                "‰ªÖÈôêÈÄÅ„ÄåÂú£ËØûÂø´ÁÉ≠„ÄçÁ≥ªÂàóÁ§ºÁâ©ÔºåÂåÖÂê´Áõ¥Êí≠Èó¥‰∏éËÅäÂ§©ÂÆ§„ÄÇ",
                "ÊéíË°åÊ¶úÈíªÁü≥Áõ∏ÂêåËÄÖÔºå‰ª•ÂÖàËææÊàêËÄÖÊéíÂêçÂú®Ââç„ÄÇ",
                "ÊÄªÈíªÊ¶úÂ•ñÂä±‰∏éÊäΩÂ•ñÂ•ñÂä±Â∞Ü‰∫éÊ¥ªÂä®ÁªìÊùüÂêé 3 ‰∏™Â∑•‰ΩúÂ§©ÂÜÖÂèëÊîæ„ÄÇ",
                "Êï∞ÊçÆÊòæÁ§∫ÂèØËÉΩÊúâ‰∫õÂæÆÂª∂ËøüÔºåÊúÄÁªàÁªìÊûú‰ª•ÂÆòÊñπËÆ°ÁÆó‰∏∫ÂáÜ„ÄÇ"
            ]
        },
        en: {
            title: "Xmas Carnival",
            duration: "Dec 12 - Dec 16 (GMT+8)",
            giftRequirement: "Send 'happy-xmas' gifts only",
            drawTitle: "Lucky Draw",
            badgeDraw: "LUCKY DRAW",
            drawDesc: "50 Winners will each receive:",
            diamondsEach: "Per Winner",
            rankTitle: "Ranking Rewards",
            badgeRank: "TOP 10",
            rankDesc: "Top 10 users will win up to:",
            maxPrize: "Champion Prize",
            ctaButton: "Send Gift Now",
            lotteryStatus: "Eligibility",
            qualified: "Qualified",
            notQualified: "Not Eligible",
            event1Desc: "Send any 'happy-xmas' gift to qualify",
            myRank: "Rank",
            myDiamonds: "Diamonds",
            event2Title: "Ranking Prize List",
            rankCol: "Rank",
            prizeCol: "Prize",
            loading: "Loading...",
            errorTitle: "Error",
            rulesTitle: "Rules",
            rules: [
                "Only 'happy-xmas' gifts are eligible (Live & Chat).",
                "Tie-breaker: First to achieve the score ranks higher.",
                "Ranking and Lucky Draw rewards will be sent within 3 working days after the event.",
                "Data display may have slight delays; official calculation is final."
            ]
        },
        jp: {
            title: "„ÇØ„É™„Çπ„Éû„ÇπÁ•≠",
            duration: "12/12 - 12/16 (GMT+8)",
            giftRequirement: "„Äå„É°„É™„Éº„ÇØ„É™„Çπ„Éû„Çπ„Äç„ÇÆ„Éï„ÉàÈôêÂÆö",
            drawTitle: "ÊäΩÈÅ∏„Éó„É¨„Çº„É≥„Éà",
            badgeDraw: "ÊäΩÈÅ∏„Ç§„Éô„É≥„Éà",
            drawDesc: "ÊäΩÈÅ∏„Åß50ÂêçÊßò„Å´„Éó„É¨„Çº„É≥„ÉàÔºö",
            diamondsEach: "‰∏Ä‰∫∫„ÅÇ„Åü„Çä",
            rankTitle: "„É©„É≥„Ç≠„É≥„Ç∞Â†±ÈÖ¨",
            badgeRank: "TOP 10",
            rankDesc: "‰∏ä‰Ωç10ÂêçÊßò„Å´„ÅØÊúÄÂ§ßÔºö",
            maxPrize: "1‰ΩçÂ†±ÈÖ¨",
            ctaButton: "„ÇÆ„Éï„Éà„ÇíÈÄÅ„Çã",
            lotteryStatus: "ÊäΩÈÅ∏Ë≥áÊ†º",
            qualified: "Áç≤ÂæóÊ∏à„Åø",
            notQualified: "Êú™ÈÅîÊàê",
            event1Desc: "„Äå„É°„É™„Éº„ÇØ„É™„Çπ„Éû„Çπ„Äç„ÇÆ„Éï„ÉàÈÄÅ‰ø°„ÅßË≥áÊ†ºGET",
            myRank: "È†Ü‰Ωç",
            myDiamonds: "„ÉÄ„Ç§„É§Êï∞",
            event2Title: "„É©„É≥„Ç≠„É≥„Ç∞Â†±ÈÖ¨‰∏ÄË¶ß",
            rankCol: "È†Ü‰Ωç",
            prizeCol: "Â†±ÈÖ¨",
            loading: "Ë™≠„ÅøËæº„Åø‰∏≠...",
            errorTitle: "„Ç®„É©„Éº",
            rulesTitle: "Ê≥®ÊÑè‰∫ãÈ†Ö",
            rules: [
                "„Äå„É°„É™„Éº„ÇØ„É™„Çπ„Éû„Çπ„Äç„ÇÆ„Éï„Éà„ÅÆ„ÅøÂØæË±°Ôºà„É©„Ç§„Éñ/„ÉÅ„É£„ÉÉ„ÉàÂê´„ÇÄÔºâ„ÄÇ",
                "ÂêåÁÇπ„ÅÆÂ†¥Âêà„ÅØ„ÄÅÂÖà„Å´ÈÅîÊàê„Åó„ÅüÊñπ„Åå‰∏ä‰Ωç„Å®„Å™„Çä„Åæ„Åô„ÄÇ",
                "„É©„É≥„Ç≠„É≥„Ç∞Â†±ÈÖ¨„Å®ÊäΩÈÅ∏Â†±ÈÖ¨„ÅØ„Ç§„Éô„É≥„ÉàÁµÇ‰∫ÜÂæå3Âñ∂Ê•≠Êó•‰ª•ÂÜÖ„Å´ÈÖçÂ∏É„Åï„Çå„Åæ„Åô„ÄÇ",
                "„Éá„Éº„ÇøË°®Á§∫„Å´ÈÅÖÂª∂„Åå„ÅÇ„ÇãÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÊúÄÁµÇÁµêÊûú„ÅØÂÖ¨ÂºèÈõÜË®à„Å´Ê∫ñ„Åò„Åæ„Åô„ÄÇ"
            ]
        }
    };

    const RANKING_PRIZES = [100000, 90000, 80000, 70000, 60000, 50000, 40000, 30000, 20000, 10000];

    createApp({
        setup() {
            const currentLang = ref('tw');
            const userData = ref({ rank: null, diamond_cost: 0, is_eligible: false });
            const loading = ref(true);
            const error = ref(null);
            const userId = ref(null);
            const giftUrl = ref(GIFT_URL);

            const t = computed(() => TRANSLATIONS[currentLang.value]);

            const formatNumber = (num) => num ? num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") : "0";

            // ÊéíÂêçÊ®£ÂºèËºîÂä©ÂáΩÂºè
            const getRankBadgeClass = (index) => {
                if (index === 0) return 'bg-yellow-400 text-black shadow-[0_0_10px_gold]';
                if (index === 1) return 'bg-gray-300 text-black shadow-[0_0_10px_silver]';
                if (index === 2) return 'bg-orange-400 text-black shadow-[0_0_10px_orange]';
                return 'bg-gray-700 text-gray-300';
            };

            const getUserId = () => {
                const url = window.location.href;
                const match = url.match(/[?&]user_id=([a-fA-F0-9]{24})/);
                return (match && match[1]) ? match[1] : null;
            };

            const fetchData = async () => {
                userId.value = getUserId();
                if (userId.value) {
                    try {
                        const response = await fetch(`${API_BASE_URL}/?user_id=${userId.value}`, {
                            credentials: 'omit'
                        });
                        if (response.ok) {
                            userData.value = await response.json();
                        } else {
                            throw new Error("API Error");
                        }
                    } catch (e) {
                        error.value = "Connection Failed";
                    }
                }
                loading.value = false;
            };

            onMounted(fetchData);

            return {
                currentLang,
                t,
                userData,
                loading,
                error,
                rankingPrizes: RANKING_PRIZES,
                formatNumber,
                getRankBadgeClass,
                giftUrl
            };
        }
    }).mount('#app');
</script>

</body>
</html>
